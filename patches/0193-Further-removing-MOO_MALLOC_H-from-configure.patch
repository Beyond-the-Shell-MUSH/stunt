From ece594b608b0abe7be332210f80376215cb59659 Mon Sep 17 00:00:00 2001
From: Steve Wainstead <wainstead@gmail.com>
Date: Mon, 8 Aug 2011 23:01:34 +0000
Subject: [PATCH 193/223] Further removing MOO_MALLOC_H from configure

---
 server/configure    |   28 ----------------------------
 server/configure.ac |    1 -
 2 files changed, 29 deletions(-)

diff --git a/server/configure b/server/configure
index 7cfadc5..875d387 100755
--- a/server/configure
+++ b/server/configure
@@ -2317,9 +2317,6 @@ ac_config_headers="$ac_config_headers config.h"
 
 
 
-
-
-
 for ac_prog in 'bison -y' byacc
 do
   # Extract the first word of "$ac_prog", so it can be a program name with args.
@@ -4749,31 +4746,6 @@ ac_compile='$CC -c $CFLAGS $CPPFLAGS conftest.$ac_ext >&5'
 ac_link='$CC -o conftest$ac_exeext $CFLAGS $CPPFLAGS $LDFLAGS conftest.$ac_ext $LIBS >&5'
 ac_compiler_gnu=$ac_cv_c_compiler_gnu
 
-
-echo checking whether stdlib.h declares malloc and friends
-
-pattern="[^_a-zA-Z0-9]malloc *\("
-cat confdefs.h - <<_ACEOF >conftest.$ac_ext
-/* end confdefs.h.  */
-
-#include <stdlib.h>
-
-
-_ACEOF
-if (eval "$ac_cpp conftest.$ac_ext") 2>&5 |
-  $EGREP "$pattern" >/dev/null 2>&1; then :
-
-else
-  ac_fn_c_check_header_mongrel "$LINENO" "malloc.h" "ac_cv_header_malloc_h" "$ac_includes_default"
-if test "x$ac_cv_header_malloc_h" = xyes; then :
-  $as_echo "#define NEED_MALLOC_H 1" >>confdefs.h
-
-fi
-
-
-fi
-rm -f conftest*
-
 ac_fn_c_check_header_mongrel "$LINENO" "sys/bsdtypes.h" "ac_cv_header_sys_bsdtypes_h" "$ac_includes_default"
 if test "x$ac_cv_header_sys_bsdtypes_h" = xyes; then :
   $as_echo "#define NEED_BSDTYPES_H 1" >>confdefs.h
diff --git a/server/configure.ac b/server/configure.ac
index b159036..d14b234 100644
--- a/server/configure.ac
+++ b/server/configure.ac
@@ -44,7 +44,6 @@ AC_PROG_CC_STDC
 MOO_CONST
 CPP=""
 AC_PROG_CPP
-MOO_MALLOC_H
 AC_HEADER_CHECK(sys/bsdtypes.h, AC_DEFINE(NEED_BSDTYPES_H))
 AC_HEADER_CHECK(sys/select.h, AC_DEFINE(NEED_SELECT_H))
 AC_HEADER_CHECK(memory.h, AC_DEFINE(NEED_MEMORY_H))
-- 
1.7.9.5

